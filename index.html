<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Patrocinar | Loryez</title><link rel="icon" type="image/x-icon" href="https://styles.redditmedia.com/t5_6xhgie/styles/communityIcon_8kgc2fy21dcb1.jpeg?width=128&frame=1&auto=webp&s=2f9049eda6789be694672b93c66064e8007c11bf"><style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap');:root{--bg-color:#0f0f0f;--surface-color:#1a1a1a;--surface-light:#252525;--text-primary:#f0f0f0;--text-secondary:#aaaaaa;--accent-color:#8a2be2;--accent-hover:#9933ff;--accent-glow:rgba(138,43,226,0.2);--border-color:#333;--discount-color:#4caf50;--warning-color:#ff9800;--error-color:#f44336;--info-color:#2196f3;--studio-color:#ff6b6b;--release-color:#4ecdc4;}*{margin:0;padding:0;box-sizing:border-box;}body{font-family:'Inter',sans-serif;background-color:var(--bg-color);color:var(--text-primary);padding:2rem;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;}::-webkit-scrollbar{width:8px;}::-webkit-scrollbar-track{background:var(--surface-color);}::-webkit-scrollbar-thumb{background:var(--accent-color);border-radius:4px;}::-webkit-scrollbar-thumb:hover{background:var(--accent-hover);}.main-container{display:grid;grid-template-columns:minmax(0,2fr) minmax(0,1.2fr);gap:24px;max-width:1400px;margin:0 auto;}.column{display:flex;flex-direction:column;gap:24px;}.card{background-color:var(--surface-color);border-radius:12px;padding:24px;border:1px solid var(--border-color);box-shadow:0 4px 12px rgba(0,0,0,0.2);transition:box-shadow 0.2s ease;}.full-width{grid-column:1/-1;}h2{font-family:'Montserrat',sans-serif;font-size:1.5rem;font-weight:700;margin-bottom:20px;letter-spacing:-0.5px;}h3{font-size:1.1rem;font-weight:600;margin-bottom:8px;color:var(--text-primary);}.tabs{display:flex;gap:8px;margin-bottom:20px;background-color:var(--surface-light);padding:6px;border-radius:10px;}.tab-button{background:transparent;border:none;color:var(--text-secondary);padding:10px 16px;border-radius:8px;cursor:pointer;transition:all 0.3s ease;flex:1;font-weight:600;font-size:0.95rem;}.tab-button.active{background-color:var(--accent-color);color:var(--text-primary);box-shadow:0 4px 10px rgba(138,43,226,0.3);transform:translateY(-2px);}.tab-button:not(.active):hover{background-color:var(--surface-light);color:var(--text-primary);}.search-wrapper{position:relative;}#search-input{width:100%;background-color:var(--surface-light);border:1px solid var(--border-color);border-radius:8px;padding:14px 16px;color:var(--text-primary);font-size:1rem;transition:all 0.2s ease;}#search-input:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px var(--accent-glow);}#search-results-list{position:absolute;top:100%;left:0;right:0;background-color:#2c2c2c;border:1px solid var(--border-color);border-top:none;border-radius:0 0 8px 8px;z-index:10;max-height:300px;overflow-y:auto;}.search-result-item{padding:12px 16px;cursor:pointer;display:flex;align-items:center;gap:12px;transition:background-color 0.2s ease;}.search-result-item:hover{background-color:var(--accent-color);}.search-result-item img{width:40px;height:60px;object-fit:cover;border-radius:4px;}.search-result-item p{font-weight:500;}.search-result-item span{font-size:0.85rem;color:var(--text-secondary);}#search-preview.card{margin-top:20px;display:flex;flex-direction:column;gap:20px;}.preview-content{display:flex;gap:20px;}.preview-content .poster{width:180px;height:270px;object-fit:cover;border-radius:8px;flex-shrink:0;}.preview-content .synopsis{font-size:0.95rem;margin-top:12px;line-height:1.6;max-height:140px;overflow-y:auto;color:var(--text-secondary);padding-right:8px;}.continue-button,.pay-button{background:linear-gradient(45deg,var(--accent-hover),var(--accent-color));color:var(--text-primary);border:none;border-radius:8px;padding:14px 20px;font-weight:600;font-size:1rem;cursor:pointer;transition:all 0.2s ease;text-align:center;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;text-decoration:none;}.continue-button:hover,.pay-button:hover{transform:scale(1.02);box-shadow:0 0 15px rgba(138,43,226,0.4);}.classificacao-box{border:1px solid var(--accent-color);background-color:rgba(138,43,226,0.1);border-radius:8px;padding:16px;margin-bottom:20px;}.classificacao-box p{font-size:1rem;margin-bottom:8px;}.classificacao-box span{font-size:0.9rem;color:var(--warning-color);display:block;margin-top:8px;}.config-group{margin-bottom:28px;}.checkbox-group label{display:flex;align-items:center;gap:12px;padding:12px;font-size:0.95rem;cursor:pointer;border-radius:8px;transition:background-color 0.2s ease;}.checkbox-group label:hover{background-color:var(--surface-light);}.checkbox-group label span{color:var(--text-secondary);}input[type="checkbox"]{appearance:none;width:22px;height:22px;border:2px solid var(--border-color);border-radius:6px;background-color:var(--surface-color);cursor:pointer;position:relative;transition:all 0.2s ease;}input[type="checkbox"]:checked{background-color:var(--accent-color);border-color:var(--accent-color);transform:scale(1.05);}input[type="checkbox"]:checked::after{content:'âœ”';position:absolute;color:white;font-size:16px;top:50%;left:50%;transform:translate(-50%,-50%);}.select-input{width:100%;background-color:var(--surface-light);border:1px solid var(--border-color);border-radius:8px;padding:14px;color:var(--text-primary);font-size:0.95rem;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23aaaaaa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 1rem center;background-size:1em;transition:all 0.2s ease;}.select-input:focus{outline:none;border-color:var(--accent-color);}.number-input-wrapper{display:flex;justify-content:space-between;align-items:center;padding:0 12px;}.number-input-wrapper input{background:none;border:none;outline:none;color:var(--text-primary);text-align:center;width:50px;font-size:1rem;}.num-btn{background:none;border:none;color:var(--text-secondary);font-size:1.5rem;cursor:pointer;padding:0 8px;border-radius:4px;transition:background-color 0.2s;}.num-btn:hover{background-color:rgba(255,255,255,0.1);}#summary-content .poster{width:80px;height:120px;object-fit:cover;border-radius:8px;}#price-breakdown{padding:16px 0;}#price-breakdown p{display:flex;justify-content:space-between;color:var(--text-secondary);font-size:0.95rem;margin-bottom:12px;}.divider{height:1px;background-color:var(--border-color);margin:16px 0;}.total{display:flex;justify-content:space-between;align-items:baseline;padding-top:16px;}.total .total-text{font-size:1.3rem;font-weight:600;}.total .price{font-family:'Montserrat',sans-serif;font-size:2rem;font-weight:700;color:var(--accent-color);text-shadow:0 0 10px rgba(138,43,226,0.3);}#pay-button{margin-top:24px;}.pay-button.disabled{background:#555;cursor:not-allowed;transform:none;box-shadow:none;}.pay-button.disabled:hover{background:#555;}.placeholder{padding:16px;color:var(--text-secondary);text-align:center;font-style:italic;}.hidden{display:none;}.info-box{grid-column:1/-1;background-color:var(--surface-light);border-radius:8px;padding:24px;margin-top:16px;border:1px solid var(--border-color);}.info-box ul{padding-left:20px;color:var(--text-secondary);font-size:0.95rem;line-height:1.8;}.nudez-episodes-config{margin-top:16px;padding:16px;background-color:var(--surface-light);border-radius:8px;border:1px solid var(--border-color);}.change-button{background:none;border:1px solid var(--accent-color);color:var(--accent-color);padding:8px 16px;border-radius:8px;cursor:pointer;font-size:0.9rem;font-weight:600;transition:all 0.2s;}.change-button:hover{background-color:var(--accent-color);color:var(--text-primary);}.nudez-checkbox{border:2px solid var(--accent-color)!important;}.discount-notice,.warning-notice,.error-notice{font-size:0.9rem;margin-top:8px;font-weight:500;padding:10px;border-radius:8px;border-left:4px solid;}.discount-notice{color:var(--discount-color);background-color:rgba(76,175,80,0.1);border-color:var(--discount-color);}.warning-notice{color:var(--warning-color);background-color:rgba(255,152,0,0.1);border-color:var(--warning-color);}.error-notice{color:var(--error-color);background-color:rgba(244,67,54,0.1);border-color:var(--error-color);}.media-info{color:var(--text-secondary)!important;font-size:0.9rem;margin-top:4px;}.info-content{background-color:var(--surface-light);border:1px solid var(--border-color);border-radius:8px;padding:24px;margin:24px 0;}.info-content h4{margin-bottom:12px;font-size:1.15rem;color:var(--text-primary);}.info-content ul{padding-left:20px;color:var(--text-secondary);font-size:0.95rem;}.studio-list,.release-info{font-family:'Montserrat',sans-serif;font-size:1rem;margin-top:8px;line-height:1.5;font-weight:500;}.studio-list{color:var(--studio-color);}.release-info{color:var(--release-color);}.content-info-spacing{margin:20px 0;}.option-label{display:block;margin-bottom:8px;font-weight:500;color:var(--text-primary);}.episode-selector{margin-top:16px;border:1px solid var(--border-color);border-radius:8px;padding:16px;background-color:var(--surface-light);}.episode-item{display:flex;align-items:center;margin-bottom:4px;padding:10px;border-radius:6px;transition:background-color 0.2s;gap:12px;}.episode-item:hover{background-color:var(--surface-color);}.episode-info{flex:1;}.episode-duration{color:var(--text-secondary);font-size:0.85rem;margin-left:12px;}.episode-selection-tip{background-color:rgba(138,43,226,0.08);border-left:3px solid var(--accent-color);padding:12px;margin:16px 0;border-radius:0 6px 6px 0;font-size:0.9rem;line-height:1.6;color:var(--text-secondary);}.episode-selection-tip strong{color:var(--text-primary);}.nudez-warning{background-color:rgba(255,152,0,0.1);border:1px solid var(--warning-color);border-radius:8px;padding:12px;margin-top:12px;font-size:1rem;color:var(--warning-color);font-weight:500;}.episode-scroll-container{max-height:300px;overflow-y:auto;margin-top:12px;padding-right:8px;}.grito-notice{background-color:rgba(255,215,0,0.1);border:1px solid gold;border-radius:8px;padding:16px;margin:20px 0;font-size:1rem;color:gold;text-align:center;font-weight:600;}</style></head><body><div class="main-container"><div class="column"><div id="search-block" class="card"><h2>Buscar</h2><div class="tabs"><button class="tab-button active" data-type="movie">Filme</button><button class="tab-button" data-type="tv">SÃ©rie/Anime</button></div><div class="search-wrapper"><input type="text" id="search-input" placeholder="Pesquisar filme"><div id="search-results-list" class="hidden"></div></div><div id="search-preview" class="card hidden"></div></div><div id="config-block" class="card hidden"><div id="config-options"></div></div></div><div class="column"><div class="card"><h2>Resumo do PatrocÃ­nio</h2><div id="summary-placeholder" class="placeholder">Configure as opÃ§Ãµes para ver o preÃ§o</div><div id="summary-content" class="hidden"><div style="display:flex;gap:16px;"><img class="poster" id="summary-poster" src="" alt="Poster"><div><h3 id="summary-title"></h3><p id="summary-info" class="media-info"></p></div></div><div class="divider"></div><div id="price-breakdown"></div><div class="divider"></div><div class="total"><p class="total-text">Total:</p><p class="price" id="total-price">R$ 0,00</p></div><a id="pay-button" href="https://livepix.gg/loryez" target="_blank" class="pay-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"/><path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"/></svg>Pagar no LivePix</a><div id="restriction-warning" class="error-notice hidden" style="margin-top:16px;"></div></div></div></div><div class="info-box"><h3>InformaÃ§Ãµes importantes:</h3><ul><li>Para sÃ©ries e animes, Ã© necessÃ¡rio patrocinar pelo menos 3 episÃ³dios</li><li>NÃ£o sÃ£o permitidos materiais com propriedade intelectual da Warner/Universal</li><li>Materiais que precisarem de censura (nudez), nÃ£o serÃ¡ possÃ­vel transmiti-lo imediatamente. Data do filme a combinar com o patrocinador!</li></ul></div></div><script>const API_KEY='ae110c8706fa5b6ed0a58125648e31b3';const BASE_URL='https://api.themoviedb.org/3';const IMG_URL='https://image.tmdb.org/t/p/w500';const gritoIds=["1970","465086","11838","9666","1975","382602","1977","259233","400703","103445","376788","199766","199774","36917","26693","32250","44203","347946","1192702"];const nudezIds=["1422","4247","4248","139038","184345","111","238","273248","11324","106646","2034","87502","87428","7551","9800","597","290250","4982","9352","11397","7347","598","1579","18785","45243","109439","650","87516","670","641","63311","499932","138832","639933","270010","402529","277216","10060","14410","1813","281957","68718","76203","646380","11831","550","274","10027","2330","11423","4689","4553","1830","1948","15092","11452","10591","195589","76493","496","740985"];const state={mediaType:'movie',selectedItem:null,tempItem:null,options:{season:1,episodes:3,selectedEpisodes:[],nudez:false,nudezEpisodes:0,},derived:{tvType:'series',episodeCount:0,seasonEpisodes:0,seasonEpisodesData:[],hasNudez:false,ageRating:'ClassificaÃ§Ã£o nÃ£o encontrada',ageRatingDescription:'NÃ£o foi possÃ­vel determinar a classificaÃ§Ã£o indicativa',discountNotice:'',warningNotice:'',restrictedCompany:null,productionCompanies:[],releaseDate:'',temNudezEspecial:false,isGrito:false}};const $=(selector)=>document.querySelector(selector);const $$=(selector)=>document.querySelectorAll(selector);function init(){$$('.tab-button').forEach(tab=>tab.addEventListener('click',selectTab));$('#search-input').addEventListener('input',handleSearchInput);}function selectTab(event){$$('.tab-button').forEach(t=>t.classList.remove('active'));event.target.classList.add('active');state.mediaType=event.target.dataset.type;$('#search-input').placeholder=state.mediaType==='movie'?'Pesquisar filme':'Pesquisar sÃ©rie ou anime';resetToSearch();}let searchTimeout;function handleSearchInput(){clearTimeout(searchTimeout);$('#search-preview').classList.add('hidden');const query=$('#search-input').value.trim();if(query.length>2){searchTimeout=setTimeout(()=>searchMedia(query),300);}else{$('#search-results-list').classList.add('hidden');}}async function searchMedia(query){const endpoint=`${BASE_URL}/search/${state.mediaType}?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=pt-BR&include_adult=false`;const response=await fetch(endpoint);const data=await response.json();renderSearchResults(data.results);}function renderSearchResults(results){const list=$('#search-results-list');list.innerHTML='';if(results&&results.length>0){results.forEach(item=>{const div=document.createElement('div');div.className='search-result-item';const title=item.title||item.name;const year=(item.release_date||item.first_air_date)?.split('-')[0]||'';div.innerHTML=`<img src="${item.poster_path?IMG_URL+item.poster_path:''}" alt="poster"> <div><p>${title}</p><span>${year}</span></div>`;div.addEventListener('click',()=>showPreview(item));list.appendChild(div);});list.classList.remove('hidden');}}function showPreview(item){state.tempItem=item;$('#search-results-list').classList.add('hidden');const title=item.title||item.name;const year=(item.release_date||item.first_air_date)?.split('-')[0]||'';$('#search-preview').innerHTML=`<div class="preview-content"><img src="${item.poster_path?IMG_URL+item.poster_path:''}" class="poster"><div><h3>${title}</h3><p class="media-info">${year}</p><p class="synopsis">${item.overview||'Sinopse nÃ£o disponÃ­vel.'}</p></div></div><button class="continue-button">Continuar</button>`;$('#search-preview').classList.remove('hidden');$('#search-preview .continue-button').addEventListener('click',()=>selectItem(item.id));}async function selectItem(id){state.options={season:1,episodes:3,selectedEpisodes:[],nudez:false,nudezEpisodes:0,};const endpoint=`${BASE_URL}/${state.mediaType}/${id}?api_key=${API_KEY}&language=pt-BR`;const response=await fetch(endpoint);state.selectedItem=await response.json();if(state.selectedItem.id===325789){state.selectedItem.runtime=126;}if(state.selectedItem.id===15003){state.selectedItem.runtime=93;}state.derived.isGrito=gritoIds.includes(state.selectedItem.id.toString());state.derived.temNudezEspecial=!state.derived.isGrito&&nudezIds.includes(state.selectedItem.id.toString());await fetchContentRating();if(state.mediaType==='tv'){const isAnimation=state.selectedItem.genres.some(g=>g.id===16);state.derived.tvType=isAnimation?'anime':'series';await fetchSeasonDetails();}state.derived.hasNudez=!state.derived.isGrito&&(state.selectedItem.adult||false);checkRestrictedCompanies();getProductionInfo();checkDiscounts();switchToConfigView();renderConfigOptions();calculatePrice();}function checkRestrictedCompanies(){const restrictedCompanies={'Warner Bros.':['warner','new line cinema','dc comics'],'Universal':['universal','focus features','dreamworks animation'],'Toei':['toei']};state.derived.restrictedCompany=null;if(state.selectedItem.production_companies){for(const company of state.selectedItem.production_companies){const companyNameLower=company.name.toLowerCase();for(const[displayName,keywords]of Object.entries(restrictedCompanies)){if(keywords.some(keyword=>companyNameLower.includes(keyword))){state.derived.restrictedCompany=`${displayName} (via ${company.name})`;if(displayName.toLowerCase().includes(companyNameLower)){state.derived.restrictedCompany=displayName;}return;}}}}}function getProductionInfo(){state.derived.productionCompanies=[];if(state.selectedItem.production_companies){state.derived.productionCompanies=state.selectedItem.production_companies.map(company=>company.name);}if(state.selectedItem.release_date){const date=new Date(state.selectedItem.release_date);state.derived.releaseDate=date.toLocaleDateString('pt-BR');}else if(state.selectedItem.first_air_date){const date=new Date(state.selectedItem.first_air_date);state.derived.releaseDate=date.toLocaleDateString('pt-BR');}else{state.derived.releaseDate='Data nÃ£o disponÃ­vel';}}async function fetchContentRating(){let ratingEndpoint;if(state.mediaType==='movie'){ratingEndpoint=`${BASE_URL}/movie/${state.selectedItem.id}/release_dates?api_key=${API_KEY}`;}else{ratingEndpoint=`${BASE_URL}/tv/${state.selectedItem.id}/content_ratings?api_key=${API_KEY}`;}try{const response=await fetch(ratingEndpoint);const ratingData=await response.json();let foundRating=false;if(state.mediaType==='movie'){const brRelease=ratingData.results.find(r=>r.iso_3166_1==='BR');if(brRelease&&brRelease.release_dates.length>0&&brRelease.release_dates[0].certification){state.derived.ageRating=brRelease.release_dates[0].certification;foundRating=true;}}else{const brRating=ratingData.results.find(r=>r.iso_3166_1==='BR');if(brRating&&brRating.rating){state.derived.ageRating=brRating.rating;foundRating=true;}}if(!foundRating){let usRating='';if(state.mediaType==='movie'){const usRelease=ratingData.results.find(r=>r.iso_3166_1==='US');if(usRelease&&usRelease.release_dates.length>0&&usRelease.release_dates[0].certification){usRating=usRelease.release_dates[0].certification;}}else{const usRatingObj=ratingData.results.find(r=>r.iso_3166_1==='US');if(usRatingObj&&usRatingObj.rating){usRating=usRatingObj.rating;}}if(usRating){state.derived.ageRating=convertForeignRatingToBR(usRating);foundRating=true;}}if(!foundRating){for(const countryResult of ratingData.results){if(countryResult.iso_3166_1==='BR'||countryResult.iso_3166_1==='US')continue;let foreignRating='';if(state.mediaType==='movie'){if(countryResult.release_dates&&countryResult.release_dates.length>0){const certification=countryResult.release_dates.find(rd=>rd.certification)?.certification;if(certification)foreignRating=certification;}}else{if(countryResult.rating){foreignRating=countryResult.rating;}}if(foreignRating){const convertedRating=convertForeignRatingToBR(foreignRating);if(convertedRating!=='ClassificaÃ§Ã£o nÃ£o encontrada'){state.derived.ageRating=convertedRating;foundRating=true;break;}}}}if(!foundRating){state.derived.ageRating='ClassificaÃ§Ã£o nÃ£o encontrada';state.derived.ageRatingDescription='NÃ£o foi possÃ­vel determinar a classificaÃ§Ã£o indicativa';return;}switch(state.derived.ageRating){case'L':state.derived.ageRatingDescription='Livre para todos os pÃºblicos';break;case'10':state.derived.ageRatingDescription='NÃ£o recomendado para menores de 10 anos';break;case'12':state.derived.ageRatingDescription='NÃ£o recomendado para menores de 12 anos';break;case'14':state.derived.ageRatingDescription='NÃ£o recomendado para menores de 14 anos';break;case'16':state.derived.ageRatingDescription='NÃ£o recomendado para menores de 16 anos';break;case'18':state.derived.ageRatingDescription='NÃ£o recomendado para menores de 18 anos';break;default:state.derived.ageRatingDescription='ClassificaÃ§Ã£o indicativa nÃ£o encontrada';}}catch(error){console.error('Erro ao buscar classificaÃ§Ã£o:',error);state.derived.ageRating='ClassificaÃ§Ã£o nÃ£o encontrada';state.derived.ageRatingDescription='NÃ£o foi possÃ­vel determinar a classificaÃ§Ã£o indicativa';}}function convertForeignRatingToBR(foreignRating){const ratingMap={'G':'L','PG':'10','PG-13':'12','R':'16','NC-17':'18','TV-Y':'L','TV-Y7':'10','TV-G':'L','TV-PG':'10','TV-14':'14','TV-MA':'18','U':'L','12A':'12','15':'16','0':'L','6':'10','12':'12','16':'16','18':'18','Tous publics':'L','-10':'10','-12':'12','-16':'16','-18':'18','G':'L','PG12':'12','R15+':'16','R18+':'18','M':'14','MA15+':'16','R18+':'18','X18+':'18','14A':'14','18A':'18','APTA':'L','7':'10','All':'L','19':'18'};return ratingMap[foreignRating]||'ClassificaÃ§Ã£o nÃ£o encontrada';}async function fetchSeasonDetails(){const seasonEndpoint=`${BASE_URL}/tv/${state.selectedItem.id}/season/${state.options.season}?api_key=${API_KEY}&language=pt-BR`;const response=await fetch(seasonEndpoint);const seasonData=await response.json();state.derived.seasonEpisodesData=seasonData.episodes||[];if(state.derived.tvType==='series'||state.derived.tvType==='anime'){state.options.selectedEpisodes=state.derived.seasonEpisodesData.slice(0,3).map(ep=>({id:ep.id,number:ep.episode_number,duration:ep.runtime||0,isFree:false,addedAutomatically:false}));}}function renderConfigOptions(){const infoSep=" â€§ ";const year=(state.selectedItem.release_date||state.selectedItem.first_air_date)?.split('-')[0]||'N/A';const movieInfo=`Filme ${infoSep} ${year} ${infoSep} ${formatDuration(state.selectedItem.runtime)}`;const tvInfo=`${state.derived.tvType==='anime'?'Anime':'SÃ©rie'} ${infoSep} ${year}`;let optionsHTML=`<div style="display:flex;justify-content:space-between;align-items:center;"><h2>Item Selecionado</h2><button class="change-button" id="change-item">Alterar</button></div><div style="display:flex;gap:16px;margin-bottom:24px;"><img src="${state.selectedItem.poster_path?IMG_URL+state.selectedItem.poster_path:''}" class="poster" style="width:80px;height:120px;"><div><h3>${state.selectedItem.title||state.selectedItem.name}</h3><p class="media-info">${state.mediaType==='movie'?movieInfo:tvInfo}</p></div></div><div class="classificacao-box"><p><strong>ClassificaÃ§Ã£o Indicativa</strong></p><p><strong>${state.derived.ageRating}</strong> - ${state.derived.ageRatingDescription}</p>`;if(state.derived.temNudezEspecial){optionsHTML+=`<div class="nudez-warning">Este filme contÃ©m nudez</div>`;}else if(!state.derived.isGrito&&(state.mediaType==='movie'&&parseInt(state.derived.ageRating)>=14)||(state.mediaType==='tv'&&state.derived.tvType==='series'&&parseInt(state.derived.ageRating)>=16)){optionsHTML+=`<span>âš  Pode conter nudez. Considere aplicar a taxa de nudez abaixo.</span>`;}optionsHTML+=`</div>`;if(state.derived.restrictedCompany){optionsHTML+=`<div class="error-notice" style="margin-top:-10px;margin-bottom:20px;">Aviso: Este conteÃºdo tem vÃ­nculo com a ${state.derived.restrictedCompany} e nÃ£o pode ser patrocinado.</div>`;}if(state.derived.isGrito){optionsHTML+=`<div class="grito-notice">ConteÃºdo da franquia "O Grito" - PreÃ§o fixo de R$ 15.000,00. Taxas nÃ£o se aplicam.</div>`;}optionsHTML+=`<div class="info-content"><h4>InformaÃ§Ãµes do ConteÃºdo</h4><div class="divider"></div><div class="studio-list"><strong>EstÃºdios detectados:</strong><br>${state.derived.productionCompanies.length>0?state.derived.productionCompanies.join(', '):'NÃ£o disponÃ­vel'}</div><div class="divider"></div><div class="release-info"><strong>LanÃ§ado em:</strong> ${state.derived.releaseDate}</div></div>`;if(state.mediaType==='tv'){const seasons=state.selectedItem.seasons.filter(s=>s.season_number>0&&s.episode_count>0);const seasonsHTML=seasons.map(s=>`<option value="${s.season_number}" data-episodes="${s.episode_count}">${s.name} (${s.episode_count} eps)</option>`).join('');optionsHTML+=`<div class="config-group"><h3>Temporada</h3><select id="season-select" class="select-input">${seasonsHTML}</select></div>`;optionsHTML+=`<div class="config-group"><h3>Selecionar EpisÃ³dios</h3><div class="episode-selector"><p style="margin-bottom:12px;font-size:0.9rem;color:var(--text-secondary);">Selecione os episÃ³dios que deseja patrocinar (mÃ­nimo 3):</p><div class="episode-selection-tip"><p><strong>Dica:</strong> Para escolher episÃ³dios fora de ordem (caso os primeiros jÃ¡ tenham sido patrocinados), <strong>primeiro selecione 3 novos episÃ³dios</strong> e sÃ³ depois desmarque os 3 primeiros que vÃªm selecionados por padrÃ£o.</p></div><div class="episode-scroll-container" id="episodes-list"></div></div><div class="discount-notice ${state.derived.discountNotice?'':'hidden'}" style="margin-top:16px;">${state.derived.discountNotice}</div></div>`;}if(!state.derived.isGrito){optionsHTML+=`<div class="config-group checkbox-group" style="margin-top:24px;"><h3 style="margin-top:16px;">ConteÃºdo de Risco</h3>`;if(state.derived.temNudezEspecial){state.options.nudez=true;optionsHTML+=`<label><input type="checkbox" data-option="nudez" checked disabled class="nudez-checkbox"> ContÃ©m Nudez (automÃ¡tico)</label>`;optionsHTML+=`<div class="nudez-warning" style="margin-top:12px;">Este filme foi identificado como contendo nudez. A taxa serÃ¡ aplicada automaticamente.</div>`;}else{if(state.mediaType==='movie'){optionsHTML+=`<label><input type="checkbox" data-option="nudez" ${state.options.nudez?'checked':''} class="nudez-checkbox"> ContÃ©m Nudez (+R$ 15)</label>`;}else{optionsHTML+=`<label><input type="checkbox" data-option="nudez" ${state.options.nudez?'checked':''} class="nudez-checkbox"> ContÃ©m Nudez (+R$ 10 POR EP C/ NUDEZ)</label>`;}}optionsHTML+=`</div>`;if(state.mediaType==='tv'&&state.options.nudez){optionsHTML+=`<div class="nudez-episodes-config"><h3>Quantos episÃ³dios contÃªm nudez?</h3><div class="number-input-wrapper"><button class="num-btn" data-action="dec-nudez">-</button><input type="number" id="nudez-episodes-count" value="${state.options.nudezEpisodes}" min="0" max="${state.options.selectedEpisodes.length}"><button class="num-btn" data-action="inc-nudez">+</button></div></div>`;}}$('#config-options').innerHTML=optionsHTML;if(state.mediaType==='tv'){renderEpisodesList();}$('#change-item').addEventListener('click',resetToSearch);if(state.mediaType==='tv'){$('#season-select').addEventListener('change',handleSeasonChange);if(!state.derived.isGrito&&$('#nudez-episodes-count')){$('#nudez-episodes-count').addEventListener('input',handleNudezEpisodeInput);$$('[data-action="inc-nudez"],[data-action="dec-nudez"]').forEach(btn=>{btn.addEventListener('click',handleNudezEpisodeBtn);});}handleSeasonChange();}if(!state.derived.isGrito){$$('.checkbox-group input').forEach(cb=>{if(!cb.disabled){cb.addEventListener('change',handleCheckbox);}});}}function renderEpisodesList(){const episodesList=$('#episodes-list');episodesList.innerHTML='';const selectedEpisodesMap=new Map(state.options.selectedEpisodes.map(ep=>[ep.id,ep]));state.derived.seasonEpisodesData.forEach(episode=>{const selectionInfo=selectedEpisodesMap.get(episode.id);const isSelected=!!selectionInfo;const isFree=isSelected&&selectionInfo.isFree;const episodeItem=document.createElement('div');episodeItem.className='episode-item';const freeLabel=isFree?` <span style="color:var(--discount-color);font-weight:500;">(GrÃ¡tis)</span>`:'';const disabledAttr=isFree?'disabled':'';episodeItem.innerHTML=`<input type="checkbox" class="episode-checkbox" data-episode-id="${episode.id}" data-episode-number="${episode.episode_number}" data-episode-duration="${episode.runtime||0}" ${isSelected?'checked':''} ${disabledAttr}><div class="episode-info">EpisÃ³dio ${episode.episode_number}: ${episode.name||'Sem tÃ­tulo'}${freeLabel}</div><div class="episode-duration">${formatDuration(episode.runtime)}</div>`;episodeItem.querySelector('.episode-checkbox').addEventListener('change',handleEpisodeSelection);episodesList.appendChild(episodeItem);});}function updateAndApplyFreeEpisodes(){const manualSelections=state.options.selectedEpisodes.filter(ep=>!ep.addedAutomatically);state.options.selectedEpisodes=[...manualSelections];manualSelections.sort((a,b)=>a.number-b.number);const numFreeEpisodes=Math.floor(manualSelections.length/11);if(numFreeEpisodes===0)return;const allEpisodeIdsInSelection=new Set(state.options.selectedEpisodes.map(ep=>ep.id));for(let i=1;i<=numFreeEpisodes;i++){const triggerEpisode=manualSelections[(i*11)-1];if(!triggerEpisode)continue;const triggerEpisodeIndex=state.derived.seasonEpisodesData.findIndex(ep=>ep.id===triggerEpisode.id);if(triggerEpisodeIndex!==-1&&triggerEpisodeIndex+1<state.derived.seasonEpisodesData.length){const freeEpisodeData=state.derived.seasonEpisodesData[triggerEpisodeIndex+1];if(!allEpisodeIdsInSelection.has(freeEpisodeData.id)){state.options.selectedEpisodes.push({id:freeEpisodeData.id,number:freeEpisodeData.episode_number,duration:freeEpisodeData.runtime||0,isFree:true,addedAutomatically:true});allEpisodeIdsInSelection.add(freeEpisodeData.id);}}}}function handleEpisodeSelection(e){const checkbox=e.target;const episodeId=parseInt(checkbox.dataset.episodeId);const episodeNumber=parseInt(checkbox.dataset.episodeNumber);const episodeDuration=parseInt(checkbox.dataset.episodeDuration);const manualSelections=state.options.selectedEpisodes.filter(ep=>!ep.addedAutomatically);if(!checkbox.checked&&manualSelections.length<=3){checkbox.checked=true;alert('Ã‰ necessÃ¡rio selecionar pelo menos 3 episÃ³dios.');return;}if(checkbox.checked){state.options.selectedEpisodes.push({id:episodeId,number:episodeNumber,duration:episodeDuration,isFree:false,addedAutomatically:false});}else{state.options.selectedEpisodes=state.options.selectedEpisodes.filter(ep=>ep.id!==episodeId);}if(state.derived.tvType==='anime'){updateAndApplyFreeEpisodes();}state.options.episodes=state.options.selectedEpisodes.length;if(!state.derived.isGrito&&$('#nudez-episodes-count')){$('#nudez-episodes-count').max=state.options.episodes;if(state.options.nudezEpisodes>state.options.episodes){state.options.nudezEpisodes=state.options.episodes;$('#nudez-episodes-count').value=state.options.episodes;}}renderEpisodesList();checkDiscounts();calculatePrice();}async function handleSeasonChange(){const select=$('#season-select');const selectedOption=select.options[select.selectedIndex];const seasonNumber=parseInt(select.value);state.options.season=seasonNumber;state.derived.seasonEpisodes=parseInt(selectedOption.dataset.episodes);await fetchSeasonDetails();state.options.episodes=state.options.selectedEpisodes.length;renderEpisodesList();checkDiscounts();calculatePrice();}function handleNudezEpisodeBtn(e){const input=$('#nudez-episodes-count');let value=parseInt(input.value);value+=e.target.dataset.action==='inc-nudez'?1:-1;if(value<0)value=0;if(value>state.options.selectedEpisodes.length)value=state.options.selectedEpisodes.length;input.value=value;state.options.nudezEpisodes=value;calculatePrice();}function handleNudezEpisodeInput(){const input=$('#nudez-episodes-count');let value=parseInt(input.value)||0;const max=state.options.selectedEpisodes.length;if(value<0)value=0;if(value>max)value=max;input.value=value;state.options.nudezEpisodes=value;calculatePrice();}function checkDiscounts(){if(state.derived.isGrito){state.derived.discountNotice='';return;}state.derived.discountNotice='';if(state.mediaType==='tv'){if(state.derived.tvType==='series'&&state.options.episodes===state.derived.seasonEpisodes){state.derived.discountNotice='ðŸŽ‰ 15% de desconto pela temporada completa!';}if(state.derived.tvType==='anime'){const freeEpsCount=state.options.selectedEpisodes.filter(ep=>ep.isFree).length;if(freeEpsCount>0){state.derived.discountNotice=`ðŸŽ‰ VocÃª ganhou ${freeEpsCount} episÃ³dio(s) grÃ¡tis!`;}}}const discountNoticeElement=document.querySelector('.discount-notice');if(discountNoticeElement){if(state.derived.discountNotice){discountNoticeElement.textContent=state.derived.discountNotice;discountNoticeElement.classList.remove('hidden');}else{discountNoticeElement.classList.add('hidden');}}}function handleCheckbox(e){const option=e.target.dataset.option;state.options[option]=e.target.checked;if(option==='nudez'&&!e.target.checked){state.options.nudezEpisodes=0;}if(option==='nudez'){updateNudezSection();}else{renderConfigOptions();}calculatePrice();}function updateNudezSection(){if(state.mediaType==='tv'&&state.options.nudez){const nudezConfigHTML=`<div class="nudez-episodes-config"><h3>Quantos episÃ³dios contÃªm nudez?</h3><div class="number-input-wrapper"><button class="num-btn" data-action="dec-nudez">-</button><input type="number" id="nudez-episodes-count" value="${state.options.nudezEpisodes}" min="0" max="${state.options.selectedEpisodes.length}"><button class="num-btn" data-action="inc-nudez">+</button></div></div>`;const nudezSection=document.querySelector('.nudez-episodes-config');if(nudezSection){nudezSection.outerHTML=nudezConfigHTML;}else{const checkboxGroup=document.querySelector('.checkbox-group');checkboxGroup.insertAdjacentHTML('afterend',nudezConfigHTML);}if($('#nudez-episodes-count')){$('#nudez-episodes-count').addEventListener('input',handleNudezEpisodeInput);$$('[data-action="inc-nudez"],[data-action="dec-nudez"]').forEach(btn=>{btn.addEventListener('click',handleNudezEpisodeBtn);});}}else{const nudezSection=document.querySelector('.nudez-episodes-config');if(nudezSection){nudezSection.remove();}}}function formatDuration(minutes){if(!minutes||minutes===0)return'DuraÃ§Ã£o nÃ£o disponÃ­vel';const hours=Math.floor(minutes/60);const mins=minutes%60;return hours>0?`${hours}h ${mins}m`:`${mins}m`;}function calculatePrice(){let total=0;let breakdownHTML='';const format=(v)=>`R$ ${v.toFixed(2).replace('.',',')}`;const movieBasePrice=80;const seriesEpPriceShort=20;const seriesEpPriceLong=40;const animeEpPrice=15;const nudezMovieTax=15;const nudezEpisodeTax=10;const extraMinuteTax=0.50;if(state.derived.isGrito){total=15000;breakdownHTML+=`<p><span>PreÃ§o fixo: Franquia O Grito</span><span>${format(total)}</span></p>`;}else if(state.mediaType==='movie'){total+=movieBasePrice;breakdownHTML+=`<p><span>Filme (atÃ© 2h)</span><span>${format(movieBasePrice)}</span></p>`;const runtime=state.selectedItem.runtime||0;if(runtime>120){const extraMinutes=runtime-120;const extraCost=extraMinutes*extraMinuteTax;total+=extraCost;breakdownHTML+=`<p><span>${extraMinutes} minutos extras (1min = R$0,50)</span><span>+${format(extraCost)}</span></p>`;}}else{let baseCost=0;const sortedEpisodes=[...state.options.selectedEpisodes].sort((a,b)=>a.number-b.number);sortedEpisodes.forEach(episode=>{if(episode.isFree&&state.derived.tvType==='anime'){breakdownHTML+=`<p><span>Ep ${episode.number} (${formatDuration(episode.duration)})</span><span>GrÃ¡tis</span></p>`;return;}const epDuration=episode.duration||0;let pricePerEp;if(state.derived.tvType==='anime'){pricePerEp=epDuration<=30?animeEpPrice:seriesEpPriceLong;}else{pricePerEp=epDuration<=30?seriesEpPriceShort:seriesEpPriceLong;}let extraMinutes=0;if(epDuration>60){extraMinutes=epDuration-60;}const extraCost=extraMinutes*extraMinuteTax;const episodeCost=pricePerEp+extraCost;baseCost+=episodeCost;breakdownHTML+=`<p><span>Ep ${episode.number} (${formatDuration(epDuration)})</span><span>${format(episodeCost)}</span></p>`;});total+=baseCost;if(state.derived.tvType==='series'&&state.options.episodes===state.derived.seasonEpisodes){const discount=total*0.15;total-=discount;breakdownHTML+=`<p><span>Desconto Temporada Completa</span><span>-${format(discount)}</span></p>`;}}if(!state.derived.isGrito&&(state.derived.temNudezEspecial||state.options.nudez)){if(state.mediaType==='movie'){total+=nudezMovieTax;breakdownHTML+=`<p><span>Taxa de nudez (filme)</span><span>+${format(nudezMovieTax)}</span></p>`;}else{const nudezCost=state.options.nudezEpisodes*nudezEpisodeTax;total+=nudezCost;breakdownHTML+=`<p><span>Taxa de nudez (${state.options.nudezEpisodes} ep(s))</span><span>+${format(nudezCost)}</span></p>`;}}const item=state.selectedItem;const infoSep=" â€§ ";$('#summary-poster').src=item.poster_path?IMG_URL+item.poster_path:'';$('#summary-title').textContent=item.title||item.name;if(state.mediaType==='movie'){$('#summary-info').textContent=`Filme ${infoSep} ${(item.release_date||'').split('-')[0]||'N/A'} ${infoSep} ${formatDuration(item.runtime)}`;}else{const totalMinutes=state.options.selectedEpisodes.reduce((sum,ep)=>sum+ep.duration,0);$('#summary-info').textContent=`${state.derived.tvType==='anime'?'Anime':'SÃ©rie'} ${infoSep} ${(item.first_air_date||'').split('-')[0]||'N/A'} ${infoSep} ${state.options.episodes} episÃ³dios selecionados`;}$('#price-breakdown').innerHTML=breakdownHTML;$('#total-price').textContent=format(total);const warningDiv=$('#restriction-warning');if(state.derived.restrictedCompany){$('#pay-button').classList.add('disabled');$('#pay-button').removeAttribute('href');warningDiv.textContent=`NÃ£o Ã© possÃ­vel patrocinar conteÃºdos da ${state.derived.restrictedCompany}.`;warningDiv.classList.remove('hidden');}else{$('#pay-button').classList.remove('disabled');$('#pay-button').href=`https://livepix.gg/loryez?amount=${total.toFixed(2)}`;warningDiv.classList.add('hidden');}}function switchToConfigView(){$('#search-block').classList.add('hidden');$('#config-block').classList.remove('hidden');$('#summary-placeholder').classList.add('hidden');$('#summary-content').classList.remove('hidden');}function resetToSearch(){$('#search-input').value='';$('#search-results-list').classList.add('hidden');$('#search-results-list').innerHTML='';$('#search-preview').classList.add('hidden');$('#search-preview').innerHTML='';$('#search-block').classList.remove('hidden');$('#config-block').classList.add('hidden');$('#summary-placeholder').classList.remove('hidden');$('#summary-content').classList.add('hidden');state.derived.discountNotice='';state.options={season:1,episodes:3,selectedEpisodes:[],nudez:false,nudezEpisodes:0,};}init();</script></body></html>
